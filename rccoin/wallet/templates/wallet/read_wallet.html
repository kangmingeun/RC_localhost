{% extends 'base.html' %}

{% block head %}
{% load staticfiles %}
{% endblock head %}

{% block css %}
.wallet {
    position: relative;
    text-align: center;
    border: 0px;
}
.top-right {
    position: absolute;
    top: 15%;
    right: 400px;
    font-weight: 500;
    color: #fff;
}
.centered-right {
    position: absolute;
    top: 45%;
    right: 400px;
    font-size: 40px;
    font-weight: 600;
    color: #fff;
}
.bottom-right {
    position: absolute;
    bottom: 15px;
    right: 400px;
    color: #fff;
    
}
.qrcode-text-btn {display:inline-block; background:url(//dab1nmslvvntp.cloudfront.net/wp-content/uploads/2017/07/1499401426qr_icon.svg) 50% 50% no-repeat; height:1em; width:1.7em; margin-left:-2em; cursor:pointer}
.qrcode-text-btn > input[type=file] {position:absolute; overflow:hidden; width:1px; height:1px; opacity:0}
.font-white, .font-white:hover{
    color: #fff;
    cursor: pointer;
}
.amount {
    width: 330px;
}

table {
    border-collapse:separate; 
    border-spacing: 5px;
}
.table-filter {
    background-color: #fff;
    border-bottom: 1px solid #eee;
}
.table-filter .media-photo {
    width: 50px;
    margin-top: 5px;
    margin-right: 10px;
}
.table-filter .media-body {
    display: block;
}
.table-filter .media .title {
    color: #2BBCDE;
    font-weight: bold;
    line-height: normal;
    margin-top: 2px;
}
.table-filter .media {
    font-size: 20px;
}
.title {
    font-size: 15px;
}
.table-filter .media-meta {
    font-size: 15px;
    color: #999;
    margin-left: 10px;
}
.table-filter .media .summary {
    color: #7f7f7f;
    font-size: 18px;
}
.table-filter tbody tr td {
    padding: 10px;
    vertical-align: middle;
    border-top-color: #eee;
}
tr.init td {
    border-radius: 5px;
    border-left: 5px solid #007bff;
}
tr.publish td {
    border-radius: 5px;
    border-left: 5px solid #28a745;
}
tr.remittance td {
    border-radius: 5px;
    border-left: 5px solid #ffc107;
}
tr.payment td {
    border-radius: 5px;
    border-left: 5px solid #dc3545;
}
.table-filter .media span.init {
    color: #007bff;
    font-size: 17px;
    font-weight: 600;
    margin-right: 15px;
}
.table-filter .media span.publish {
    color: #28a745;
    font-size: 17px;
    font-weight: 600;
    margin-right: 15px;
}
.table-filter .media span.remittance {
    color: #ffc107;
    font-size: 17px;
    font-weight: 600; 
    margin-right: 15px;
}
.table-filter .media span.payment {
    color: #dc3545;
    font-size: 17px;
    font-weight: 600;
    margin-right: 15px;
}
.pull-right {
    float: right!important;
}
font.title {
    font-size: 17px;
    font-weight: 600;
}


/* Media */

/* col-xl */
@media (max-width: 1200px) {
    .top-right {
        top: 15%;
        right: 310px;
    }
    .centered-right {
        top: 45%;
        right: 310px;
    }
    .bottom-right {
        bottom: 15px;
        right
    }
}
/* col-lg */
@media (max-width: 990px) {
    .top-right {
        top: 15%;
        right: 200px;
    }
    .centered-right {
        top: 45%;
        right: 200px;
    }
    .bottom-right {
        bottom: 15px;
        right: 200px;
    }
}
/* col-md */
@media (max-width: 768px) {
    table {
        margin-top: 10px;
    }
    .top-right {
        top: 15%;
        right: 110px;
    }
    .centered-right {
        top: 45%;
        right: 110px;
    }
    .bottom-right {
        bottom: 15px;
        right: 110px;
    }
    .table-filter .title {
        font-size: 13px;
    }
    .table-filter .summary {
        font-size: 15px;
    }
}
/* col-sm */
@media (max-width: 560px) {
    .top-right {
        top: 10%;
        right: 40px;
        font-size: 15px;
    }
    .centered-right {
        top: 40%;
        right: 40px;
        font-size: 30px;
    }
    .bottom-right {
        bottom: 15px;
        right: 40px;
        font-size: 17px;
    }
    .amount {
        width: 100%;
    }
    .table-filter .media-meta {
        margin-top: 3px;
        font-size: 13px;
    }
    .table-filter .summary {
        font-size: 13px;
    }
}

{% endblock css %}

{% block body %}

    <div id="contents" class="container">
        <div class="row2 justify-content-center h-100">
            <div class="w-m card-wrapper">
                <div class="col-md card fat noborder">
                    <div class="card-body" style="display: block;">
                        <h4 class="card-title">| 계좌 관리</h4>
                        <hr style="margin-bottom: 30px;">

                        <!-- Extra data -->
                        <data id="from" value="{{ user.username }}" hidden></data>
                        
                        <!-- My balance -->
                        <div class="row justify-content-center wallet">
                            <img src="{% static 'img/wallet.png' %}" class="margin-left amount" alt="보유잔액">
                            <div class="top-right">보유 금액</div>
                            <div class="centered-right">{{ balance }}&nbsp;RC</div>
                            <div class="bottom-right">
                                <label class="qrcode-text-btn" style="width: 160px; text-align: right;"><input type=file accept="image/*" capture=environment onchange="openQRCamera(this);">결제하기</label>
                                &nbsp;/&nbsp;<a href="{% url 'wallet:remittance' %}" class="font-white">송금하기</a>
                            </div>
                        </div>
                        <hr>
                    </div>
                </div>    
            </div>
        </div>

        <!-- Filter button -->
        <div class="row2 justify-content-center h-100">
            <div class="w-m card-wrapper">
                <div class="col-md noborder">
                    <div class="row card-body">
                        <h4 class="col-md-7 card-title">| 거래 이력</h4>
                        <div class="col-md-5 btn-group">
                            <button type="button" class="btn btn-primary" onclick="get_history(1, 0)">전체</button>
                            <button type="button" class="btn btn-success" onclick="get_history(1, 1)">발행</button>
                            <button type="button" class="btn btn-warning" onclick="get_history(1, 2)">송금</button>
                            <button type="button" class="btn btn-danger" onclick="get_history(1, 3)">결제</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- History -->
        <table class="table table-filter">
            <tbody id="history"></tbody>                            
        </table>
        <div class="row2 justify-content-center">
            <nav aria-label="page navigation">
                <ul id="page-area" class="pagination"></ul>
            </nav>
        </div>        

    </div>

{% endblock body %}

{% block js %}
<script src="{% static 'js/history.js'%}"></script>
{% endblock js %}